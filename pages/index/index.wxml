<!-- index.wxml -->

<view class="container">
  <!-- 心情日记 -->
  <view class="mood-card">
    <view class="date">{{todayDate}}</view>
    <image class="detail-btn" src="/pics/right.svg" bindtap="goToDetailPage"/>
    <view class="mood-write" bindtap="openFloatWindow">
      <view class="mood-content">
        <view class="mood-text">你今天心情如何？</view>
      </view>
    </view>
  </view>

  <!-- 功能卡片 -->
  <view class="function-card">
    <!-- 心理测评 -->
    <navigator class="sub-card" url="/pages/evaluation/evaluation">
      <image class="sub-image" src="/pics/scale.png">
        <view class="name">心理测评</view>
      </image>
    </navigator>


    <!-- 情绪调适 -->
    <navigator class="sub-card" url="/pages/adjust/adjust">
      <image class="sub-image" src="/pics/heart.png">
        <view class="name">情绪调适</view>
      </image>
    </navigator>
  </view>

  <!--心理格言-->
  <view class="quote-card">
    <view class="quote">{{quoteRecord.content}}</view>
    <view class="quote-author">{{quoteRecord.author}}</view>
  </view>

  <!--科普文章-->
  <view class="article-card" bindtap="openWindow">
    <image class="article-image" src="/pics/mental.png"></image>
    <view class="article-info"  wx:for="{{contentList}}" wx:key="_id">
      <view class="article-name">{{item.title}}</view>
      <view class="article-detail">{{item.detail}}</view>
    </view>
  </view>
  <cover-view class="overlay" wx:if="{{ showWindow }}" bindtap="closeWindow"> </cover-view>
    <cover-view class="window-content" wx:if="{{showWindow}}" wx:for="{{contentList}}" wx:key="_id">
      <cover-image class="article-head-image" src="/pics/health.jpg"></cover-image>
      <cover-view class="article-title">{{item.title}}</cover-view>
      <cover-view class="article-content" wx:for="{{item.content}}" wx:key="index">{{item}}
      
      </cover-view>
    </cover-view>

  <view class="line"></view>

  <!--底部信息-->
  <view class="end">由 西南交通大学心理研究与咨询中心“与情绪共舞”项目组 开发</view>
  <image class="logo" src="/pics/logo.png"></image>

  <!--心情日记悬浮按钮-->
  <view class="float-button" bindtap="openFloatWindow">
    <image class="float-button-icon" src="/pics/edit.png" />
  </view>

  <!-- 心情日记悬浮窗 -->
  <view wx:if="{{showFloatWindow}}" class="float-mask" bindtap="closeFloatWindow"></view>
  <cover-view class="float-window" wx:if="{{ showFloatWindow }}">
    <cover-view class="float-window-content">心情日记</cover-view>
  </cover-view>

</view>